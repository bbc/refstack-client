refstack-client
===============

refstack-client is a command line utility that allows you to execute Tempest
test runs based on configurations you specify.  When finished running Tempest
it sends the passed test data back to the Refstack API server.

**Environment setup**

We've created an "easy button" for Ubuntu, Centos, RHEL and openSuSe.

1. Make sure you have *git* installed
2. Get the refstack client: `git clone https://github.com/stackforge/refstack-client`
3. Go into the refstack-client directory: `cd refstack-client`
4. Run the "easy button" setup: `./setup_env`

**Options:**
   a. -t option allows to specify tag in Tempest repository which will be
   installed. By default, Tempest from last tag release will be used.

**Usage**

1. Prepare a tempest configuration file that is customized to your cloud
   environment.
2. Change the directory to the refstack-client directory
   (i.e. cd ~/refstack-client).
3. Source to use the correct Python environment.

   source .venv/bin/activate

4. Test your cloud by typing:

   ./refstack-client test -c <Path of the tempest configuration file to use>

   **Note:**

   a. Adding -v option will show the summary output.
   b. Adding -vv option will show the Tempest test result output.
   c. Adding -t option will only test a particular test case or a test group.
      This option can be used for quick verification of the target test cases
      (i.e. -t "tempest.api.identity.admin.test_roles").
   d. Adding --url option will upload the test results to the specified
      Refstack API server instead of the default Refstack API server.
      server instead of the default Refstack API server.
   e. Adding --offline option will have your test results not be uploaded.

   **Upload:**

   If you previously ran a test with refstack-client using the --offline
   option, you can upload your results to a Refstack API server by using the
   following command:

   ./refstack-client upload <Path of results file>

   The results file is a JSON file generated by refstack-client when a test has
   completed. This is saved in .venv/src/tempest/.testrepository. When you use
   the 'upload' command, you can also override the Refstack API server
   uploaded to with the --url option.
